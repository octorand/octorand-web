<div class="container-fluid">
    <div class="content">
        <div class="row align-items-center">
            <div class="col-sm">
                <h1 class="content-title my-10">
                    Prediction
                </h1>
            </div>
            <div class="col-auto">
                <button class="btn mr-5" type="button" (click)="navigateToPage('play/games')">
                    <i class="fas fa-arrow-left text-danger mr-5"></i>
                    Back
                </button>
                <button class="btn" type="button" (click)="loadGamesList()">
                    <i class="fas fa-cog text-danger mr-5" [ngClass]="{'fa-spin': loading}"></i>
                    Refresh
                </button>
            </div>
        </div>
    </div>
    <div class="row row-eq-spacing-xl">
        <div class="col-xl-12">
            <div class="card h-full">
                <div class="row">
                    <div class="col-sm">
                        <h2 class="content-title text-success">
                            Browse prediction games
                        </h2>
                        <p class="text-muted mb-20">
                            Prediction game presents a number of options for the players to bet on. Each bet contributes
                            to the prize pool. Players who bet on the winning option share the prize pool at the end of
                            the game. Check out the existing prediction games below. They come in various odds. You can
                            also create your own prediction game using our engine.
                        </p>
                        <button class="btn btn-success mb-20"
                            (click)="navigateToPage(gameDefinition.route + '/create')">
                            Create New Game
                        </button>
                    </div>
                </div>
                <hr class="m-0">
                <div class="row my-20">
                    <div class="col-sm">
                        <div class="dropdown filter-dropdown bg-dark-light">
                            <button class="btn" data-toggle="dropdown" type="button" id="filter-dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-sliders-h text-danger mr-5"></i>
                                {{selectedFilter}}
                            </button>
                            <div class="dropdown-menu dropdown-menu-left bg-dark-light"
                                aria-labelledby="filter-dropdown">
                                <a *ngFor="let filter of filters" class="dropdown-item hand"
                                    (click)="changeFilter(filter)">
                                    {{filter}}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-no-outer-padding">
                        <tbody>
                            <tr>
                                <td class="text-secondary">Name</td>
                                <td class="text-secondary">Manager</td>
                                <td class="text-secondary">Asset</td>
                                <td class="text-secondary">Volume</td>
                                <td class="text-secondary">Status</td>
                                <td class="text-secondary">Timer</td>
                            </tr>
                            <tr *ngFor="let game of gamesList" class="hand"
                                (click)="navigateToPage(gameDefinition.route + '/' + game.id)">
                                <td>{{game.storage.name}}</td>
                                <td innerHTML="{{game.storage.manager | identity:false | async}}"></td>
                                <td innerHTML="{{game.assetId | asset:false | async}}"></td>
                                <td innerHTML="{{game.storage.volume | amount:game.assetId | async}}"></td>
                                <td>{{game.status}}</td>
                                <td>{{game.timespanLeft}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>